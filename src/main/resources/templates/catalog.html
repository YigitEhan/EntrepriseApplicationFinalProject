<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equipment Catalog - Arts Rental</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <h1>ğŸ­ Arts Equipment Rental</h1>
            <p>Browse and reserve professional equipment for your projects</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <div class="container">
            <div>
                <a href="/catalog">ğŸ“¦ Catalog</a>
                <a href="/cart">ğŸ›’ Cart</a>
            </div>
            <div>
                <a href="/login">ğŸ” Login</a>
                <a href="/register">ğŸ“ Register</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Filter Section -->
        <section class="filter-section">
            <h2>ğŸ” Filter Equipment</h2>
            <form class="filter-form" method="get" action="/catalog">
                <div style="flex: 1;">
                    <label for="categoryId" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Category:</label>
                    <select id="categoryId" name="categoryId">
                        <option value="">All Categories</option>
                        <option th:each="category : ${categories}" 
                                th:value="${category.id}" 
                                th:text="${category.name}"
                                th:selected="${selectedCategory != null && selectedCategory.id == category.id}">
                        </option>
                    </select>
                </div>
                <button type="submit">Apply Filter</button>
                <a href="/catalog" style="padding: 0.75rem 1.5rem; background-color: #e0e0e0; color: #333; text-decoration: none; border-radius: 5px;">Clear</a>
            </form>
        </section>

        <!-- Selected Category Info -->
        <div th:if="${selectedCategory != null}" style="margin-bottom: 1.5rem;">
            <p style="font-size: 1.1rem; color: #667eea;">
                <strong>Showing:</strong> <span th:text="${selectedCategory.name}"></span> 
                (<span th:text="${#lists.size(products)}"></span> items)
            </p>
        </div>

        <!-- Product Grid -->
        <div class="product-grid">
            <div class="product-card" th:each="product : ${products}">
                <img th:src="${product.imageUrl}" 
                     th:alt="${product.name}" 
                     class="product-image">
                
                <div class="product-info">
                    <span class="product-category" th:text="${product.category.name}"></span>
                    <h3 class="product-name" th:text="${product.name}"></h3>
                    <p class="product-description" th:text="${product.description}"></p>
                    <div class="product-price">
                        â‚¬<span th:text="${#numbers.formatDecimal(product.price, 1, 2)}"></span>/day
                    </div>
                    <div style="display: flex; gap: 0.5rem;">
                        <button style="flex: 1; padding: 0.75rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
                            Add to Cart
                        </button>
                        <span th:if="${product.available}" 
                              style="padding: 0.75rem; background-color: #4caf50; color: white; border-radius: 5px; font-size: 0.9rem;">
                            âœ“ Available
                        </span>
                        <span th:unless="${product.available}" 
                              style="padding: 0.75rem; background-color: #f44336; color: white; border-radius: 5px; font-size: 0.9rem;">
                            âœ— Unavailable
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- No Products Message -->
        <div th:if="${#lists.isEmpty(products)}" style="text-align: center; padding: 3rem; background: white; border-radius: 10px;">
            <h2 style="color: #999;">No products found</h2>
            <p style="color: #666;">Try selecting a different category</p>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2024 Arts Equipment Rental | University Project by Yigit</p>
            <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 0.5rem;">
                Built with Spring Boot, Thymeleaf & H2 Database
            </p>
        </div>
    </footer>
</body>
</html>

